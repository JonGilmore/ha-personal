title: !secret name
resources:
  - url: /hacsfiles/lovelace-auto-entities/auto-entities.js
    type: module
  - url: /hacsfiles/lovelace-multiple-entity-row/multiple-entity-row.js
    type: module
  - url: /hacsfiles/lovelace-layout-card/layout-card.js
    type: module
  - url: /hacsfiles/frigate-hass-card/frigate-hass-card.js
    type: module
  - url: /hacsfiles/lovelace-template-entity-row/template-entity-row.js
    type: module
  - url: /hacsfiles/custom-sonos-card/custom-sonos-card.js
    type: module

views:
  ##########################################
  # HOME TAB
  ##########################################
  - title: Home
    id: home
    icon: mdi:home
    cards:
      - type: shopping-list
        title: Shopping List
      - type: entities
        show_name: false
        show_header_toggle: false
        entities:
          - entity: alarm_control_panel.elkm1_area_1
            type: custom:multiple-entity-row
            name: Alarm
            show_state: false
            secondary_info: last-changed
            entities:
              - entity: alarm_control_panel.elkm1_area_1
      - type: weather-forecast
        entity: weather.tomorrow_io_home_daily
      - type: vertical-stack
        cards:
          - type: entities
            show_name: false
            show_header_toggle: false
            entities:
              - entity: binary_sensor.garage_doors
                type: custom:multiple-entity-row
                name: Garage
                show_state: false
                secondary_info: last-changed
                entities:
                  - entity: cover.single_garage_door
                    name: single
                    tap_action:
                      action: toggle
                  - entity: cover.double_garage_door
                    name: double
                    tap_action:
                      action: toggle
          - type: horizontal-stack
            cards:
              - type: tile
                entity: lock.garage_lock
                name: garage
                vertical: true
                tap_action:
                  action: toggle
              - type: tile
                entity: lock.workshop_lock
                name: shop
                vertical: true
                tap_action:
                  action: toggle
              - type: tile
                entity: lock.mudroom_lock
                name: deck
                vertical: true
                tap_action:
                  action: toggle
          - type: horizontal-stack
            cards:
              - type: tile
                entity: group.main_floor_lights
                name: Main
                icon: mdi:lightbulb
                tap_action:
                  action: navigate
                  navigation_path: "/lovelace/lights-main"
                icon_tap_action:
                  action: call-service
                  service: button.press
                  target:
                    entity_id: button.basement_equipment_room_phantom_kp_position_1_keypad_main_off
              - type: tile
                entity: group.upstairs_lights
                name: Upstairs
                icon: mdi:lightbulb
                tap_action:
                  action: navigate
                  navigation_path: "/lovelace/lights-upstairs"
                icon_tap_action:
                  action: call-service
                  service: button.press
                  target:
                    entity_id: button.basement_equipment_room_phantom_kp_position_1_keypad_second_off
          - type: horizontal-stack
            cards:
              - type: tile
                entity: group.basement_lights
                name: Basement
                icon: mdi:lightbulb
                tap_action:
                  action: navigate
                  navigation_path: "/lovelace/lights-basement"
                icon_tap_action:
                  action: call-service
                  service: button.press
                  target:
                    entity_id: button.basement_equipment_room_phantom_kp_position_1_keypad_basement_off
              - type: tile
                entity: group.exterior_lights
                name: Exterior
                icon: mdi:lightbulb
                tap_action:
                  action: navigate
                  navigation_path: "/lovelace/lights-exterior"
                icon_tap_action:
                  action: call-service
                  service: button.press
                  target:
                    entity_id: button.basement_equipment_room_phantom_kp_position_1_keypad_exterior_off
          - type: tile
            icon: mdi:roller-shade
            entity: group.all_shades
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.driveway
                live_provider: go2rtc
      - type: entities
        show_header_toggle: false
        entities:
          - entity: binary_sensor.anybody_home
            type: custom:multiple-entity-row
            name: Presence
            secondary_info: last-changed
            entities:
              - entity: binary_sensor.anybody_away
          - entity: binary_sensor.anybody_home
            type: custom:multiple-entity-row
            name: People
            hide_state: true
            entities:
              - entity: person.jon
              - entity: person.laura
      - type: custom:auto-entities
        show_empty: false
        card:
          type: entities
          title: Lights On
        filter:
          include:
            - group: group.all_lights
              state: "on"
        sort:
          method: name
      - type: vertical-stack
        cards:
          - type: entities
            show_name: false
            show_header_toggle: false
            entities:
              - entity: sensor.trash
                type: custom:multiple-entity-row
                name: Waste Pickup
                show_state: false
                entities:
                  - entity: sensor.trash
                    format: relative
                    tap_action:
                      action: url
                      url_path: !secret trash
                  - entity: sensor.recycle
                    format: relative
                    tap_action:
                      action: url
                      url_path: !secret recycling
      - type: "custom:auto-entities"
        show_empty: true
        card:
          title: Important Dates
          type: entities
          show_header_toggle: false
        sort:
          method: state
          numeric: true
        filter:
          include:
            - entity_id: "/(birthday|anniversary|holiday)/"
              state: < 45
              options:
                type: custom:template-entity-row
                state: |
                  {% if is_state(config.entity, '0') %}
                    today
                  {% elif is_state(config.entity, '1') %}
                    tomorrow
                  {% else %}
                    {{ states(config.entity) }} days
                  {% endif %}
                # if current_years isnt defined, then add nothing at the front, elif the day is today, then add their current_years, else just add yrs at next
                secondary: |
                  {% if state_attr(config.entity, 'current_years') == None %}
                  {% elif is_state(config.entity, '0') %}
                    {{ state_attr(config.entity, 'current_years') }} yrs - 
                  {% else %}
                    {{ state_attr(config.entity, 'years_at_anniversary') }} yrs - 
                  {% endif %}
                  {{ as_timestamp(state_attr(config.entity, 'date')) | timestamp_custom('%m/%d/%Y') }}
      - type: entities
        title: Equipment
        show_header_toggle: false
        entities:
          - entity: switch.basement_equipment_room_recirculation_pump
            type: custom:multiple-entity-row
            name: Recirc Pump
            secondary_info: last-changed
            entities:
              - entity: switch.water_main
                name: main
                toggle: true
              - entity: switch.basement_equipment_room_recirculation_pump
                name: recirc
                toggle: true
          - entity: light.exterior_landscape_lights
            type: custom:multiple-entity-row
            name: Landscape
            secondary_info: last-changed
            entities:
              - entity: light.exterior_landscape_lights
                name: landscape
                toggle: true
              - entity: light.exterior_deck_posts
                name: deck
                toggle: true
          - entity: sensor.period_of_day
            type: custom:multiple-entity-row
            name: Period of Day
            secondary_info: last-changed
            entities:
              - entity: binary_sensor.light_inside
                name: main?
              - entity: binary_sensor.light_inside_basement
                name: basement?
          - entity: binary_sensor.adblocking
            type: custom:multiple-entity-row
            secondary_info: last-changed
            show_state: false
            entities:
              - entity: binary_sensor.adblocking
                icon: true
                name: " "
                state_color: false
                tap_action:
                  action: call-service
                  service: homeassistant.turn_off
                  service_data:
                    entity_id:
                      - switch.adguard_home_protection_2
                      - switch.adguard_pi_protection
          # - entity: sensor.bar_fridge_leak_sensor
          #   type: custom:multiple-entity-row
          #   name: bar
          #   icon: mdi:fridge
          #   show_state: false
          #   entities:
          #     - entity: sensor.bar_fridge_temperature
          #       name: fridge
          #     - entity: sensor.bar_freezer_temperature
          #       name: freezer
          # - entity: binary_sensor.kitchen_fridge_leak_water
          #   type: custom:multiple-entity-row
          #   name: kitchen
          #   icon: mdi:fridge
          #   show_state: false
          #   entities:
          #     - entity: sensor.kitchen_fridge_temperature
          #       name: fridge
          #     - entity: sensor.kitchen_freezer_temperature
          #       name: freezer
          # - entity: input_select.vacuum_room

  ##########################################
  # CAMERA SUBVIEW
  ##########################################
  - title: cameras
    id: camerasv1
    icon: mdi:home
    path: camerasv1
    subview: true
    panel: true
    cards:
      - type: custom:layout-card
        layout_type: custom:grid
        layout:
          mediaquery:
            "(min-width: 1800px)":
              grid-template-areas: |
                "cam1 cam2 cam3"
                "cam4 . ."
                ". . ."
            "(min-width: 1000px)":
              grid-template-areas: |
                "cam1 cam2"
                "cam3 cam4"
            "all":
              grid-template-areas: |
                "cam1"
                "cam2"
                "cam3"
                "cam4"
        cards:
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.driveway
                live_provider: go2rtc
                go2rtc:
                  modes:
                    - mjpeg
            view:
              default: live
            view_layout:
              grid-area: cam1
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.doorbell
                live_provider: go2rtc
                go2rtc:
                  modes:
                    - mjpeg
            view:
              default: live
            view_layout:
              grid-area: cam2
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.frontyard
                live_provider: go2rtc
                go2rtc:
                  modes:
                    - mjpeg
            view:
              default: live
            view_layout:
              grid-area: cam3
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.garage
                live_provider: go2rtc
                go2rtc:
                  modes:
                    - mjpeg
            view:
              default: live
            view_layout:
              grid-area: cam4

  ##########################################
  # CAMERA TAB
  ##########################################
  - title: Cameras Front
    id: camera-front
    icon: mdi:camera
    panel: true
    cards:
      - type: custom:layout-card
        layout_type: custom:grid
        layout:
          mediaquery:
            "(min-width: 1800px)":
              grid-template-areas: |
                "cam1 cam2 cam3"
                "cam4 . ."
                ". . ."
            "(min-width: 1000px)":
              grid-template-areas: |
                "cam1 cam2"
                "cam3 cam4"
            "all":
              grid-template-areas: |
                "cam1"
                "cam2"
                "cam3"
                "cam4"
        cards:
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.driveway
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam1
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.doorbell
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam2
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.frontyard
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam3
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.garage
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam4

  ##########################################
  # CAMERA TAB
  ##########################################
  - title: Cameras Rear
    id: camera-rear
    icon: mdi:camera
    panel: true
    cards:
      - type: custom:layout-card
        layout_type: custom:grid
        layout:
          mediaquery:
            "(min-width: 1800px)":
              grid-template-areas: |
                "cam1 cam2 cam3"
                "cam4 cam5 ."
                ". . ."
            "(min-width: 1000px)":
              grid-template-areas: |
                "cam1 cam2"
                "cam3 cam4"
                "cam5 ."
            "all":
              grid-template-areas: |
                "cam1"
                "cam2"
                "cam3"
                "cam4"
                "cam5"
        cards:
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.deck
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam1
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.workshop
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam2
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.grilldeck
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam3
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.mudroom
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam4
          - type: custom:frigate-card
            cameras:
              - camera_entity: camera.patio
            cameras_global:
              webrtc_card:
                ui: true
              controls:
                title:
                  mode: none
            view_layout:
              grid-area: cam5

  ##########################################
  # MUSIC TAB
  ##########################################
  - title: Music
    id: music
    icon: mdi:music
    panel: true
    cards:
      - type: custom:sonos-card
        name: Sonos
        entities:
          - media_player.deck
          - media_player.den
          - media_player.gym
          - media_player.kitchen
          - media_player.living_room
          - media_player.main_bathroom
          - media_player.main_bedroom
          - media_player.media_room
          - media_player.office
          - media_player.patio
          - media_player.playroom
          - media_player.sunroom
  ##########################################
  # TV TAB
  ##########################################
  - title: TV
    id: tv
    icon: mdi:television-classic
    cards:
      - type: media-control
        entity: media_player.gym_tv
      - type: media-control
        entity: media_player.office_tv
      - type: media-control
        entity: media_player.media_room_tv
      - type: media-control
        entity: media_player.sunroom_tv
      - type: media-control
        entity: media_player.main_bedroom_tv
      - type: media-control
        entity: media_player.great_room_tv
  ##########################################
  # LIGHT SUBVIEWS
  ##########################################
  - title: Lights - Main
    id: lights-main
    icon: mdi:lightbulb
    subview: true
    path: lights-main
    panel: true
    cards:
      - type: custom:auto-entities
        card:
          type: grid
          columns: 4
          square: false
        card_param: cards
        filter:
          include:
            - options:
                type: tile
                features:
                  - type: light-brightness
              group: group.main_floor_lights
  - title: Lights - Upstairs
    id: lights-upstairs
    icon: mdi:lightbulb
    subview: true
    path: lights-upstairs
    panel: true
    cards:
      - type: custom:auto-entities
        card:
          type: grid
          columns: 4
          square: false
        card_param: cards
        filter:
          include:
            - options:
                type: tile
                features:
                  - type: light-brightness
              group: group.upstairs_lights
  - title: Lights - Basement
    id: lights-basement
    icon: mdi:lightbulb
    subview: true
    path: lights-basement
    panel: true
    cards:
      - type: custom:auto-entities
        card:
          type: grid
          columns: 4
          square: false
        card_param: cards
        filter:
          include:
            - options:
                type: tile
                features:
                  - type: light-brightness
              group: group.basement_lights
  - title: Lights - Exterior
    id: lights-exterior
    icon: mdi:lightbulb
    subview: true
    path: lights-exterior
    panel: true
    cards:
      - type: custom:auto-entities
        card:
          type: grid
          columns: 4
          square: false
        card_param: cards
        filter:
          include:
            - options:
                type: tile
                features:
                  - type: light-brightness
              group: group.exterior_lights

  ##########################################
  # MAINTENANCE TAB
  ##########################################
  - title: Maintenance
    id: maintenance
    icon: mdi:wrench
    cards:
      - type: entities
        title: Host Stats
        show_header_toggle: false
        entities:
          - sensor.disk_use_percent
          - sensor.memory_use_percent
          - sensor.cpu_temperature
      - type: entities
        title: Toggles
        show_header_toggle: false
        entities:
          - input_boolean.block_interior_motion_lights
          - input_boolean.exterior_lights_block
          - input_boolean.guests
      - type: entities
        title: Informational
        show_header_toggle: false
        entities:
          - binary_sensor.light_inside
          - sensor.outdoor_pir_illuminance
          - sensor.lounge_pir_illuminance
      - type: markdown
        title: Automations Triggered
        content: |
          **Time &nbsp;&nbsp;&nbsp; Name**
          {% for state in (states.automation
            | selectattr('attributes.last_triggered', 'defined')
            | selectattr('attributes.last_triggered')
            | sort(attribute='attributes.last_triggered', reverse=true)) [0:40] -%}
            {% if (now() - state.attributes.last_triggered).total_seconds() < 86400 %}
              {%- set t = (as_timestamp(state.attributes.last_triggered) | timestamp_custom('%H:%M', True)) -%}
              {{t}} &nbsp;&nbsp; _{{state.name}}_
            {% endif -%}
          {% endfor %}

  ##########################################
  # MOBILE TAB
  ##########################################
  - title: Mobile
    id: mobile
    icon: mdi:phone
    cards:
      - type: "custom:auto-entities"
        card:
          show_header_toggle: false
          title: Jon
          type: entities
        sort:
          method: state
        filter:
          include:
            - entity_id: "/^.*pixel.*/"
          exclude:
            - state: "Unavailable"
        show_empty: false
      - type: "custom:auto-entities"
        card:
          show_header_toggle: false
          title: Laura
          type: entities
        sort:
          method: state
        filter:
          include:
            - entity_id: "/^.*lauras_iphone_.*/"
          exclude:
            - state: "Unknown"
        show_empty: false

  ##########################################
  # AUTOMATION & RANDOM PAGE
  ##########################################
  - title: AUTOMATION
    id: automation
    icon: mdi:progress-wrench
    cards:
      - type: "custom:auto-entities"
        show_empty: true
        card:
          title: Automations
          type: entities
          show_header_toggle: true
        sort:
          method: name
        filter:
          include:
            - entity_id: "/automation.*/"
      - type: "custom:auto-entities"
        show_empty: true
        card:
          title: Elk M1 Binary Sensors
          type: entities
          show_header_toggle: true
        sort:
          method: name
        filter:
          include:
            - entity_id: "/binary_sensor\\.elkm1.*/"
